{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kendyr/Downloads/Invitacion_XV_Fernanda/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore, type Firestore } from \"firebase/firestore\";\nimport dotenv from 'dotenv';\nimport path from 'path';\n\n// This will attempt to load environment variables from .env.local\n// This is especially useful for ensuring server-side actions have the correct environment\nif (typeof window === 'undefined') { // Only run on server\n  try {\n    dotenv.config({ path: path.resolve(process.cwd(), '.env.local') });\n  } catch(e) {\n    // It's okay if this fails, Next.js might have already loaded it.\n  }\n}\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nlet db: Firestore | undefined;\n\n// We check if the project ID is provided. If not, Firebase initialization will fail.\n// This is a common issue when the .env.local file is not set up correctly.\nif (firebaseConfig.projectId) {\n  try {\n    const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n    db = getFirestore(app);\n  } catch (e) {\n    console.error(\n      \"Firebase initialization error. Please ensure your .env.local file is configured correctly.\",\n      e\n    );\n  }\n} else {\n  // This message is more explicit about the cause\n  console.error(\"Firebase project ID not found in environment variables. Please check your .env.local file and restart the server.\");\n}\n\nexport { db };\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEA,kEAAkE;AAClE,0FAA0F;AAC1F,wCAAmC;IACjC,IAAI;QACF,qIAAA,CAAA,UAAM,CAAC,MAAM,CAAC;YAAE,MAAM,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;QAAc;IAClE,EAAE,OAAM,GAAG;IACT,iEAAiE;IACnE;AACF;AAEA,MAAM,iBAAiB;IACrB,QAAQ,QAAQ,GAAG,CAAC,4BAA4B;IAChD,YAAY,QAAQ,GAAG,CAAC,gCAAgC;IACxD,WAAW,QAAQ,GAAG,CAAC,+BAA+B;IACtD,eAAe,QAAQ,GAAG,CAAC,mCAAmC;IAC9D,mBAAmB,QAAQ,GAAG,CAAC,wCAAwC;IACvE,OAAO,QAAQ,GAAG,CAAC,2BAA2B;AAChD;AAEA,IAAI;AAEJ,qFAAqF;AACrF,2EAA2E;AAC3E,IAAI,eAAe,SAAS,EAAE;IAC5B,IAAI;QACF,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;QACrE,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;IACpB,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CACX,8FACA;IAEJ;AACF,OAAO;IACL,gDAAgD;IAChD,QAAQ,KAAK,CAAC;AAChB","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kendyr/Downloads/Invitacion_XV_Fernanda/src/actions/attendees.ts"],"sourcesContent":["'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { db } from '@/lib/firebase';\nimport { \n  collection, \n  getDocs, \n  addDoc, \n  doc, \n  updateDoc, \n  serverTimestamp, \n  Timestamp, \n  query, \n  orderBy,\n  getDoc\n} from 'firebase/firestore';\n\nexport interface Attendee {\n  id: string; // Firestore document ID\n  name: string;\n  confirmedAt: string; // Formatted date string\n  archived: boolean;\n}\n\n// A helper function to extract a useful error message\nconst getFirebaseErrorMessage = (error: unknown): string => {\n  if (error instanceof Error) {\n    const firebaseError = error as any; // Cast to access potential 'code' property\n    switch (firebaseError.code) {\n      case 'permission-denied':\n        return 'Error de permiso. Revisa las reglas de seguridad de Firestore en tu consola de Firebase para permitir escrituras en la colección \"attendees\".';\n      case 'failed-precondition':\n        return 'Error de Firestore: Falta un índice. Revisa la consola del servidor para ver un enlace para crearlo.';\n      case 'unavailable':\n        return 'El servicio de Firestore no está disponible. Revisa tu conexión a internet o el estado de Google Cloud.';\n      default:\n        return firebaseError.message || 'Ocurrió un error desconocido.';\n    }\n  }\n  return 'Ocurrió un error desconocido.';\n};\n\nconst formatTimestamp = (timestamp: Timestamp): string => {\n  const date = timestamp.toDate();\n  const formatter = new Intl.DateTimeFormat('es-NI', {\n    timeZone: 'America/Managua',\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: false,\n  });\n  // The output for 'es-NI' is like \"01/08/2025, 19:00\". The comma needs to be removed.\n  return formatter.format(date).replace(',', '');\n};\n\nexport async function getAttendees(): Promise<Attendee[]> {\n  if (!db) {\n    console.error(\"Firestore is not initialized. Returning empty list.\");\n    return [];\n  }\n  try {\n    const attendeesCol = collection(db, 'attendees');\n    const q = query(attendeesCol, orderBy('confirmedAt', 'desc'));\n    const attendeeSnapshot = await getDocs(q);\n    const attendeeList = attendeeSnapshot.docs.map(doc => {\n      const data = doc.data();\n      return {\n        id: doc.id,\n        name: data.name,\n        confirmedAt: data.confirmedAt ? formatTimestamp(data.confirmedAt as Timestamp) : 'Fecha no disponible',\n        archived: data.archived || false,\n      };\n    });\n    return attendeeList;\n  } catch (error) {\n    console.error(\"Error fetching attendees: \", error);\n    if ((error as any).code === 'failed-precondition') {\n      console.error(\n        'Firestore index not found. Please create the required index in your Firebase console. The error message should contain a link to create it.'\n      );\n    }\n    return [];\n  }\n}\n\nexport async function addAttendee(name: string) {\n  if (!db) {\n    return { success: false, message: 'Error de configuración del servidor: la base de datos no está disponible.' };\n  }\n  if (!name.trim()) {\n    return { success: false, message: 'El nombre no puede estar vacío' };\n  }\n\n  try {\n    const newAttendeeRef = await addDoc(collection(db, 'attendees'), {\n      name: name.trim(),\n      confirmedAt: serverTimestamp(),\n      archived: false,\n    });\n    \n    revalidatePath('/admin/attendees');\n    \n    return { success: true, attendeeId: newAttendeeRef.id };\n  } catch (error) {\n    console.error(\"Error adding attendee: \", error);\n    const message = getFirebaseErrorMessage(error);\n    return { success: false, message: message };\n  }\n}\n\nexport async function toggleArchiveAttendee(formData: FormData) {\n  if (!db) {\n    return { success: false, message: 'Error de configuración del servidor: la base de datos no está disponible.' };\n  }\n  const attendeeId = formData.get('attendeeId') as string;\n\n  if (!attendeeId) {\n    return { success: false, message: 'ID de invitado inválido' };\n  }\n\n  const attendeeRef = doc(db, 'attendees', attendeeId);\n\n  try {\n    const attendeeSnap = await getDoc(attendeeRef);\n    if (!attendeeSnap.exists()) {\n      return { success: false, message: 'Invitado no encontrado' };\n    }\n    const currentArchivedState = attendeeSnap.data().archived;\n\n    await updateDoc(attendeeRef, {\n      archived: !currentArchivedState,\n    });\n    \n    revalidatePath('/admin/attendees');\n    \n    return { success: true };\n  } catch (error) {\n    console.error(\"Error toggling archive state: \", error);\n    const message = getFirebaseErrorMessage(error);\n    return { success: false, message: message };\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kendyr/Downloads/Invitacion_XV_Fernanda/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {addAttendee as '40f8eced58c01375335fb91c55faf0198c11da2765'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kendyr/Downloads/Invitacion_XV_Fernanda/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","debugId":null}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kendyr/Downloads/Invitacion_XV_Fernanda/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgQ,GAC7R,8BACA","debugId":null}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}